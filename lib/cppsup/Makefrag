CPPSUP_INCLUDES = -I$(TOP)/lib/cppsup
USER_CXXFLAGS += $(CPPSUP_INCLUDES)

OBJDIRS += lib/cppsup

LIB_SRCFILES += \
	lib/cppsup/eh_personality.cc \
	lib/cppsup/eh_globals.cc \
	lib/cppsup/eh_terminate.cc \
	lib/cppsup/eh_alloc.cc \
	lib/cppsup/eh_catch.cc \
	lib/cppsup/eh_throw.cc \
	lib/cppsup/eh_term_handler.cc \
	lib/cppsup/eh_unex_handler.cc \
	lib/cppsup/eh_exception.cc \
	lib/cppsup/eh_aux_runtime.cc \
	lib/cppsup/eh_type.cc \
	lib/cppsup/del_op.cc \
	lib/cppsup/del_opnt.cc \
	lib/cppsup/del_opv.cc \
	lib/cppsup/del_opvnt.cc \
	lib/cppsup/new_handler.cc \
	lib/cppsup/new_op.cc \
	lib/cppsup/new_opnt.cc \
	lib/cppsup/new_opv.cc \
	lib/cppsup/new_opvnt.cc \
	lib/cppsup/tinfo.cc \
	lib/cppsup/tinfo2.cc \
	lib/cppsup/vterminate.cc \
	lib/cppsup/pure.cc

CPPSUP_FLAGS = -Wno-missing-noreturn -D_GLIBCXX_HOSTED=1

$(OBJDIR)/lib/cppsup/%.o: lib/cppsup/%.cc
	@mkdir -p $(@D)
	$(CXX) $(USER_CXXFLAGS) -Werror $(CPPSUP_FLAGS) -c -o $@ $<

