OBJDIRS += pkg/uclibc/libc/inet

INET_MSRC := pkg/uclibc/libc/inet/addr.c
INET_MOBJ := \
	inet_aton.o inet_addr.o inet_ntoa.o inet_makeaddr.o inet_lnaof.o \
	inet_netof.o
INET_MOBJ := $(patsubst %.o, $(OBJDIR)/pkg/uclibc/libc/inet/%.o, $(INET_MOBJ))

INET_MSRC2 := pkg/uclibc/libc/inet/resolv.c
INET_MOBJ2 := encodeh.o decodeh.o encoded.o decoded.o lengthd.o encodeq.o \
	decodeq.o lengthq.o encodea.o decodea.o encodep.o decodep.o \
	formquery.o dnslookup.o resolveaddress.o opennameservers.o \
	closenameservers.o resolvename.o gethostbyname.o res_init.o \
	res_query.o gethostbyaddr.o read_etc_hosts_r.o get_hosts_byname_r.o \
	get_hosts_byaddr_r.o gethostbyname2.o getnameinfo.o gethostent.o \
	gethostbyname_r.o gethostbyname2_r.o gethostbyaddr_r.o \
	res_comp.o ns_name.o
INET_MOBJ2 := $(patsubst %.o, $(OBJDIR)/pkg/uclibc/libc/inet/%.o, $(INET_MOBJ2))

INET_MSRC3 := socketcalls.c
INET_MOBJ3 := accept.o bind.o connect.o getpeername.o getsockname.o getsockopt.o \
	listen.o recv.o recvfrom.o recvmsg.o send.o sendmsg.o sendto.o \
	setsockopt.o shutdown.o socket.o socketpair.o 
INET_MOBJ3 := $(patsubst %.o, $(OBJDIR)/pkg/uclibc/libc/inet/%.o, $(INET_MOBJ3))

INET_CSRC :=	\
	getservice.c getproto.c hostid.c getnetent.c getnetbynm.c getnetbyad.c \
	inet_net.c ntop.c herror.c if_nametoindex.c gai_strerror.c getaddrinfo.c \
	in6_addr.c ether_addr.c ntohl.c

LIBC_SRCFILES += $(patsubst %.c, pkg/uclibc/libc/inet/%.c, $(INET_CSRC))
LIBC_OBJFILES += $(INET_MOBJ) $(INET_MOBJ2)

$(INET_MOBJ): $(INET_MSRC)
	@mkdir -p $(@D)
	$(CC) $(UCLIBC_CFLAGS) -DL_$(patsubst $(OBJDIR)/pkg/uclibc/libc/inet/%.o,%,$@) $< -c -o $@

$(INET_MOBJ2): $(INET_MSRC2)
	@mkdir -p $(@D)
	$(CC) $(UCLIBC_CFLAGS) -DL_$(patsubst $(OBJDIR)/pkg/uclibc/libc/inet/%.o,%,$@) $< -c -o $@

$(INET_MOBJ3): $(INET_MSRC3)
	@mkdir -p $(@D)
	$(CC) $(UCLIBC_CFLAGS) -DL_$(patsubst $(OBJDIR)/pkg/uclibc/libc/inet/%.o,%,$@) $< -c -o $@
