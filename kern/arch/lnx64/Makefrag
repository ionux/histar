# -*-Makefile-*-

KERN_CFLAGS += -mno-red-zone

KERN_ARCH :=					\
	$(ARCHDIR)/init.c			\
	$(ARCHDIR)/panic.c			\
	$(ARCHDIR)/page.c			\
	$(ARCHDIR)/pmap.c			\
	$(ARCHDIR)/lnxdisk.c			\
	$(ARCHDIR)/trap.c			\
	$(ARCHDIR)/devstub.c

KERN_LIB :=					\
	lib/$(ARCH)/longjmp.S			\
	lib/printfmt.c				\
	lib/cksum.c				\
	lib/bf60.c

KERN_DEV :=

$(OBJDIR)/kern/kernel:
	$(CC) -o $@ $(KERN_LDFLAGS) $(KERN_OBJFILES)

all: $(OBJDIR)/kern/kernel

